(()=>{function t(){$.ajax({url:"api.php",method:"GET",success:function(t){var e=$("#product-list");if(e.empty(),t.length>0)for(var a=0;a<t.length;a++){var r=t[a],d=$("<div>").addClass("product-item");d.append('<input type="checkbox" class="delete-checkbox" value="'+r.sku+'">'),d.append('<span class="sku">'+r.sku+"</span>"),d.append('<span class="name">'+r.name+"</span>"),d.append('<span class="price">'+r.price+"</span>"),d.append('<span class="additional-info">'+r.additionalInfo+"</span>"),e.append(d)}else e.append('<div class="empty-message">No products found</div>')},error:function(){console.log("Error occurred while loading the product list")}})}function e(t){var e=$("#additional-attribute");e.empty(),"DVD"===t?(e.append($("<label>").text("Size (MB):")),e.append($("<input>").attr("type","number").attr("id","size").attr("required","required"))):"Book"===t?(e.append($("<label>").text("Weight (Kg):")),e.append($("<input>").attr("type","number").attr("id","weight").attr("required","required"))):"Furniture"===t&&(e.append($("<label>").text("Height:")),e.append($("<input>").attr("type","number").attr("id","height").attr("required","required")),e.append($("<label>").text("Width:")),e.append($("<input>").attr("type","number").attr("id","width").attr("required","required")),e.append($("<label>").text("Length:")),e.append($("<input>").attr("type","number").attr("id","length").attr("required","required")))}function a(){$("#add-product-modal").hide()}$(document).ready((function(){t(),$("#add-btn").click((function(){!function(){$("#add-product-modal").empty();var t=$("<div>").addClass("modal-content"),r=$("<form>").attr("id","product-form"),d=$("<select>").attr("id","product-type");d.append($("<option>").val("DVD").text("DVD")),d.append($("<option>").val("Book").text("Book")),d.append($("<option>").val("Furniture").text("Furniture"));var p=$("<div>").attr("id","additional-fields");r.append($("<label>").text("SKU:")),r.append($("<input>").attr("type","text").attr("id","sku").attr("required","required")),r.append($("<label>").text("Name:")),r.append($("<input>").attr("type","text").attr("id","name").attr("required","required")),r.append($("<label>").text("Price:")),r.append($("<input>").attr("type","number").attr("id","price").attr("required","required")),r.append($("<label>").text("Product Type:")),r.append(d),p.append($("<label>").text("Additional Attribute:")),p.append('<div id="additional-attribute"></div>'),r.append(p),r.append($("<button>").attr("type","submit").text("Save")),r.append($("<button>").attr("type","button").text("Cancel").click(a)),t.append(r),$("#add-product-modal").append(t),$("#product-type").change((function(){e($(this).val())})),e($("#product-type").val()),$("#add-product-modal").show()}()})),$("#add-product-modal").on("submit","#product-form",(function(e){e.preventDefault(),function(){var e,r=$("#sku").val(),d=$("#name").val(),p=$("#price").val(),n=$("#product-type").val();"DVD"===n?e=$("#size").val():"Book"===n?e=$("#weight").val():"Furniture"===n&&(e=$("#height").val()+"x"+$("#width").val()+"x"+$("#length").val());var i={sku:r,name:d,price:p,productType:n,additionalAttribute:e};$.ajax({url:"api.php",method:"POST",data:JSON.stringify(i),success:function(e){a(),t()},error:function(){console.log("Error occurred while adding the product")}})}()})),$("#product-list").on("click","#mass-delete-btn",(function(){!function(){var e=[];if($(".delete-checkbox:checked").each((function(){var t=$(this).val();e.push(t)})),0!==e.length){if(confirm("Are you sure you want to delete the selected products?")){var a={products:e};$.ajax({url:"api.php",method:"DELETE",data:JSON.stringify(a),success:function(e){t()},error:function(){console.log("Error occurred while deleting the products")}})}}else alert("Please select at least one product to delete")}()}))}))})();